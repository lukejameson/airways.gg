# Database
DATABASE_URL=postgresql://user:password@localhost:5432/airwaysgg

# Redis/Valkey
REDIS_URL=redis://localhost:6379

# ML Service
ML_SERVICE_URL=http://localhost:8000
MODEL_PATH=./ml-models

# Authentication
SESSION_SECRET=your-super-secret-session-key-change-this-in-production
ADMIN_EMAIL=admin@airways.gg
ADMIN_PASSWORD=change-this-password

# API Keys
OPENMETEO_API_URL=https://api.open-meteo.com/v1/forecast
FR24_API_TOKEN=your-fr24-api-token

# Position service
# How often to poll FR24 for live/implied-airborne flights (seconds).
# Covers BOTH inbound (to GCI) and outbound (from GCI) flights — direction is
# determined by actualDeparture being set and the flight not being in a terminal status.
# FR24 charges 8 credits per returned flight on the /live/flight-positions/full endpoint.
#
# Credit budget guide (assumes ~3.5 simultaneous flights at peak):
#   300s (5 min) → ~22,000 credits/month  ← default, matches 30K/month plan headroom
#   240s (4 min) → ~28,000 credits/month
#   180s (3 min) → ~22,000 credits/month outbound-only (too high with inbound added)
POSITION_INTERVAL_LIVE_SECS=300
POSITION_INTERVAL_MS=300000

# Scraper — operating window
SCRAPER_CUTOFF_HOUR=23
SCRAPER_WAKE_OFFSET_MINS=30

# Scraper — dynamic interval tiers (minutes)
# High: < 20 min to next flight, Medium: 20-60 min, Low: 60-120 min, Idle: > 120 min
SCRAPER_INTERVAL_HIGH_MINS=5
SCRAPER_INTERVAL_MEDIUM_MINS=5
SCRAPER_INTERVAL_LOW_MINS=10
SCRAPER_INTERVAL_IDLE_MINS=15

# Scraper — smart bundling window for wall-clock prefetch slots (minutes)
# Prefetch runs at wall-clock: 00:00, 06:00, 12:00, 18:00 GY local
# If a live scrape fires within this window of a slot, tomorrow's data is bundled into it
SCRAPER_PREFETCH_BUNDLE_WINDOW_MINS=15

# Scraper — delay before running startup prefetch (seconds)
# Set to 0 to disable startup prefetch
# Startup prefetch is skipped during sleep hours (before 05:00 or after cutoff)
SCRAPER_STARTUP_PREFETCH_DELAY_SECS=30

# Scraper — high frequency threshold in minutes (below this, prefetches won't bundle)
# When interval is less than this, tomorrow's data won't be bundled to avoid slowing critical scrapes
SCRAPER_HIGH_FREQ_THRESHOLD_MINS=20

# Scraper — max retries for slot operations before giving up
SCRAPER_MAX_SLOT_RETRIES=5

# Scraper — base delay for exponential backoff on retries (milliseconds)
SCRAPER_RETRY_BASE_DELAY_MS=1000

# Scraper — max delay for exponential backoff on retries (milliseconds)
SCRAPER_RETRY_MAX_DELAY_MS=300000

# Scraper — circuit breaker: failures before opening circuit
# When circuit is open, operations are skipped until reset timeout
SCRAPER_CIRCUIT_BREAKER_THRESHOLD=5

# Scraper — circuit breaker: reset timeout in milliseconds
# Circuit resets after this time without failures
SCRAPER_CIRCUIT_BREAKER_RESET_MS=60000

SCRAPER_MAX_RETRIES=3
BACKFILL_START_DATE=2019-01-01
BACKFILL_END_DATE=
GUERNSEY_AIRPORT_URL=https://www.airport.gg

# Environment
NODE_ENV=development
PORT=3000

PUBLIC_BUY_ME_A_COFFEE_URL=https://www.buymeacoffee.com/lukejameson

PUBLIC_UMAMI_WEBSITE_ID=your-website-id-from-umami
PUBLIC_UMAMI_URL=https://your-umami-instance.com

DOMAIN=airways.gg
